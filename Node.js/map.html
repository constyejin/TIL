<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kakao Map Open API</title>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3f934c6740bb75959c633c6ddfddceb8"></script>
</head>
<body>
  <div id="map" style="width:500px;height:400px;"></div>
  <button onclick="getCurrentPosBtn()">내 위치 가져오기</button>
  <script>
    // var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
    // var options = { //지도를 생성할 때 필요한 기본 옵션
    // center: new kakao.maps.LatLng(33.450701, 126.570667), //지도의 중심좌표.
    // level: 3 //지도의 레벨(확대, 축소 정도)
    // };

    // var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
    mapOption = {
      center: new kakao.maps.LatLng(37.56646, 126.98121), // 지도의 중심좌표
      level: 3, // 지도의 확대 레벨
      mapTypeId : kakao.maps.MapTypeId.ROADMAP // 지도종류
    };

    // 지도를 생성한다
    var map = new kakao.maps.Map(mapContainer, mapOption);

    function locationLoadSuccess(pos){
      // 현재 위치 받아오기
      var currentPos = new kakao.maps.LatLng(pos.coords.latitude,pos.coords.longitude);
      console.log(currentPos);

      // 지도 이동(기존 위치와 가깝다면 부드럽게 이동)
      map.panTo(currentPos);

      // 마커 생성
      var marker = new kakao.maps.Marker({
      position: currentPos
      });

      // 기존에 마커가 있다면 제거
      marker.setMap(null);
      marker.setMap(map);
    };

    function locationLoadError(pos){
     alert('위치 정보를 가져오는데 실패했습니다.');
    };

    // 위치 가져오기 버튼 클릭시
    function getCurrentPosBtn(){
      navigator.geolocation.getCurrentPosition(locationLoadSuccess,locationLoadError);
    };
  </script>
</body>
</html>
