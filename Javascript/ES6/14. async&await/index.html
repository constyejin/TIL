<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promise 어려워서 싫으면 async / await 사용</title>
</head>
<body>  
  <script>
    // ES8(2017~) 문법부터 제공되는 async / await
    // async를 function 앞에 붙이면 함수 실행 후에 Promise Object를 return한다.
    async function plus(){
      // return으로 result로 결과를 보낼 수 있다.
      // return 1 + 1;
      // return Promise.reject('실패');

      var pro = new Promise(function(resolve, reject){
        var calc = 1 + 1;
        resolve(calc);

        // await은 Promise 실패시 에러나고 멈춘다.
        // reject(calc);
      });
      
      
      // pro.then(function(){
        //   console.log('성공!');
        // })
        
      // await를 만나면 Promise 해결까지 기다린다.
      // async funciton 안에서 사용하는 await
      // try {이걸 해보고 에러나면} catch {이걸 실행 해주세요}
      try { 
        var result = await pro;
        console.log(result);
      } catch {
        console.log('에러에러에러')
      }
    }

    plus();

    // async 사용시 new Promise() 없이도 .then() 사용 가능함.
    // async function 안에서 쓰는 await
    // plus().then(function(result){
    //   console.log(result + '성공!')
    // })
  </script>
</body>
</html>
